<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My App</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">My App</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Contact</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <!-- User Form -->
        <form id="userForm">
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" id="userName" placeholder="Name" required>
            </div>
            <div class="form-group">
                <label for="name">Name</label>
                <input type="email" id="userEmail" placeholder="Email" required>
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-primary">Create User</button>
            </div>
        </form>

        <div class="content">
            <h1>Contact Form</h1>
            <div class="table-users">
                <table class="table" id="table-users">
                    <thead>
                        <tr>
                            <th>User ID</th>
                            <th>Name</th>
                            <th>Phone</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>John Doe</td>
                            <td>555-555-5555</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Jane Doe</td>
                            <td>555-555-5555</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Contact Form -->
        <form id="contactForm">
            <div class="form-group">
                <label for="name">ID</label>
                <input type="text" id="contactUserId" placeholder="User ID" required>
            </div>
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" id="contactName" placeholder="Name" required>
            </div>
            <div class="form-group">
                <label for="name">Phone</label>
                <input type="tel" id="contactPhone" placeholder="Phone" required>
            </div>
            <div class="alert alert-danger" id="alert">

            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-primary">Create Contact</button>
            </div>
        </form>

        <div class="content">
            <h1>Contact Form</h1>
            <div class="table-users">
                <table class="table" id="table-contact">
                    <thead>
                        <tr>
                            <th>User ID</th>
                            <th>Name</th>
                            <th>Phone</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>John Doe</td>
                            <td>555-555-5555</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Jane Doe</td>
                            <td>555-555-5555</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- Import JavaScript File as Module -->
    <script type="module">
        document.getElementById('alert').style.display = 'none';
      //import { User } from './js/user.js';
      //import { Contact } from './js/contact.js';

      // Your JavaScript code to handle form submissions goes here

      /*document.getElementById('userForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const name = document.getElementById('userName').value;
        const email = document.getElementById('userEmail').value;
        const newUser = new User(Date.now(), name, email);
        console.log('User created:', newUser);
      });
      
      document.getElementById('contactForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const userId = document.getElementById('contactUserId').value;
        const name = document.getElementById('contactName').value;
        const phone = document.getElementById('contactPhone').value;
        const newContact = new Contact(Date.now(), userId, name, phone);
        console.log('Contact created:', newContact);
      });*/

      // JavaScript code as previously defined
class User {
    constructor(id, name, email) {
      this.id = id;
      this.name = name;
      this.email = email;
    }
  }
  
  class Contact {
    constructor(id, userId, name, phone) {
      this.id = id;
      this.userId = userId;
      this.name = name;
      this.phone = phone;
    }
  }
  
  document.getElementById('userForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const name = document.getElementById('userName').value;
    const email = document.getElementById('userEmail').value;
    const newUser = new User(Date.now(), name, email);

    // Validation filter to deny special characters or attack attempts
    const specialChars = /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/;
    const invalidChars = specialChars.test(name) || specialChars.test(email);

    if (invalidChars) {
        document.getElementById('alert').style.display = 'block';
        document.getElementById('alert').innerHTML = 'Invalid input. Special characters are not allowed.';
        return;
      console.log('Invalid input. Special characters are not allowed.');
      document.getElementById('alert').innerHTML = 'Invalid input. Special characters are not allowed.';
      return;
    }else{
        document.getElementById('alert').style.display = 'none';
        document.getElementById('alert').innerHTML = '';
    }

    const table = document.getElementById('table-users');
    const row = table.insertRow();
    const userIdCell = row.insertCell(0);
    const nameCell = row.insertCell(1);
    const phoneCell = row.insertCell(2);

    userIdCell.innerHTML = newUser.id;
    nameCell.innerHTML = newUser.name;
    phoneCell.innerHTML = newUser.phone;
  });
  
  document.getElementById('contactForm').addEventListener('submit', function(e) {
    e.preventDefault();

    document.getElementById('alert').style.display = 'none';

    const userId = document.getElementById('contactUserId').value;
    const name = document.getElementById('contactName').value;
    const phone = document.getElementById('contactPhone').value;

    // Validation filter to deny special characters or attack attempts
    const specialChars = /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/;
    const invalidChars = specialChars.test(name) || specialChars.test(email);
    
    // Validation filter for phone number
    /**
     * Phone number format: XXX-XXX-XXXX
     * X represents a digit from 0 to 9
     GitHub Copilot
used /explain (rerun without)
This code defines a regular expression pattern using the RegExp constructor in JavaScript. Regular expressions are used to match patterns in strings.

In this case, the regular expression pattern is ^\d{3}-\d{3}-\d{4}$. Let's break it down:

^ and $ are called anchors. They represent the start and end of the string, respectively. This means that the entire string must match the pattern, from start to end.

\d is a shorthand character class that matches any digit from 0 to 9.

{3} specifies that the preceding pattern (in this case, \d) must occur exactly 3 times. So, \d{3} matches three consecutive digits.

- matches a hyphen character.

\d{4} matches four consecutive digits.

Putting it all together, the regular expression ^\d{3}-\d{3}-\d{4}$ matches a string that has the following pattern: three digits, followed by a hyphen, followed by three more digits, followed by another hyphen, and finally followed by four digits.

This regular expression can be used to validate phone numbers in the format 123-456-7890, where each group of digits is separated by a hyphen
     */
    const phoneRegex = /^\d{3}-\d{3}-\d{4}$/;
    const invalidPhone = !phoneRegex.test(phone);

    if (invalidPhone) {
        document.getElementById('alert').style.display = 'block';
        document.getElementById('alert').innerHTML = 'Invalid phone number format. Please use the format XXX-XXX-XXXX.';
        return;
    }else{
        document.getElementById('alert').style.display = 'none';
        document.getElementById('alert').innerHTML = '';
    }

    if (invalidChars) {
        document.getElementById('alert').style.display = 'block';
        document.getElementById('alert').innerHTML = 'Invalid input. Special characters are not allowed.';     
        return;
      console.log('Invalid input. Special characters are not allowed.');
      return;
    }else{
        document.getElementById('alert').style.display = 'none';
        document.getElementById('alert').innerHTML = '';
    }

    const newContact = new Contact(Date.now(), userId, name, phone);
    const table = document.getElementById('table-contact');
    const row = table.insertRow();
    const userIdCell = row.insertCell(0);
    const nameCell = row.insertCell(1);
    const phoneCell = row.insertCell(2);

    userIdCell.innerHTML = newContact.userId;
    nameCell.innerHTML = newContact.name;
    phoneCell.innerHTML = newContact.phone;

    console.log('Contact created:', newContact);
  });
    </script>

    
</body>
</html>